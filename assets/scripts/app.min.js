'use strict';var FIREBASE_CONFIG={apiKey:'AIzaSyDAgH_lsRqdiAfaRwvw1EmnSqYXdmGXJ-o',authDomain:'hcde-310-221704.firebaseapp.com',databaseURL:'https://hcde-310-221704.firebaseio.com',projectId:'hcde-310-221704',storageBucket:'hcde-310-221704.appspot.com',messagingSenderId:'306209852582'};firebase.initializeApp(FIREBASE_CONFIG);var PAGE=document.body.dataset.page,db=firebase.firestore();db.settings({timestampsInSnapshots:!0});var bodyMasthead=document.getElementById('masthead'),alternateMasthead=function(){0===window.scrollY?bodyMasthead.classList.add('inverse'):bodyMasthead.classList.remove('inverse')};window.requestAnimationFrame(alternateMasthead),window.setInterval(alternateMasthead,10),firebase.auth().onAuthStateChanged(function(a){if(a){bodyMasthead.classList.remove('logged-out'),bodyMasthead.classList.add('logged-in');var b=!1;db.collection('users').doc(a.uid).collection('pokedexes').limit(1).get().then(function(c){c.forEach(function(){b=!0})}).then(function(){if('portal'===PAGE||'about'===PAGE||'contact'===PAGE||b||'welcome'===PAGE||(window.location.href='/welcome'),'welcome'===PAGE){var c=document.getElementById('onboarding-form');c.addEventListener('submit',function(d){d.preventDefault();var f=document.getElementById('game').value,g=document.getElementById('trainer-name').value;return''===g||''===f?!1:void db.collection('users').doc(firebase.auth().currentUser.uid).collection('pokedexes').add({pokedex:f,trainerName:g}).catch(function(h){console.error(h)}).then(function(h){window.location.href='/dex?uid='+firebase.auth().currentUser.uid+'&id='+h.id})})}'selector'===PAGE&&db.collection('users').doc(a.uid).collection('pokedexes').get().then(function(d){var f=document.getElementById('user-pokedexes');d.forEach(function(g){var h=document.createElement('div');h.classList.add('pokedex-list-item'),h.classList.add(g.data().pokedex);var j=document.createElement('a'),k=document.createElement('img');k.setAttribute('src','/assets/graphics/covers/'+g.data().pokedex+'.png'),k.setAttribute('alt','Pok\xE9mon '+g.data().pokedex+' version cover'),j.appendChild(k);var l=document.createElement('span');l.innerHTML=g.data().trainerName,j.appendChild(l),j.setAttribute('href','/dex?uid='+a.uid+'&id='+g.id),h.appendChild(j),f.appendChild(h)})}),'dex'===PAGE&&function(){var d=new URL(window.location.href),f=d.searchParams.get('id'),g=document.getElementsByClassName('pokedex-item-choose-link'),h=document.getElementById('num-total'),j=document.getElementById('num-caught'),k=function(){var w=document.getElementsByClassName('caught');j.innerText=''+w.length},_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var t,_loop=function(){var w=t.value;w.addEventListener('click',function(){var x=w.parentElement;x.classList.contains('caught')?(x.classList.remove('caught'),db.collection('users').doc(a.uid).collection('pokedexes').doc(f).get().then(function(y){var z=y.data().caught;if(void 0!==z){var A=z.indexOf(x.dataset.id);-1<A&&z.splice(A,1)}db.collection('users').doc(a.uid).collection('pokedexes').doc(f).update({caught:z}).then(function(){k()})})):(x.classList.add('caught'),db.collection('users').doc(a.uid).collection('pokedexes').doc(f).get().then(function(y){var z=y.data().caught;void 0===z?z=[x.dataset.id]:z.push(x.dataset.id),db.collection('users').doc(a.uid).collection('pokedexes').doc(f).update({caught:z}).then(function(){k()})}))},!0)},s=g[Symbol.iterator]();!(_iteratorNormalCompletion=(t=s.next()).done);_iteratorNormalCompletion=!0)_loop()}catch(w){_didIteratorError=!0,_iteratorError=w}finally{try{!_iteratorNormalCompletion&&s.return&&s.return()}finally{if(_didIteratorError)throw _iteratorError}}var l=document.getElementsByClassName('pokedex-item-info-button-container'),m=function(w){return'https://cors.io/?https://bulbapedia.bulbagarden.net/wiki/'+w+'_(Pok%C3%A9mon)'},n=document.getElementById('bulbapedia-content'),o=document.getElementById('pokemon-location-info'),p=document.getElementById('li-container'),q=document.getElementById('li-name'),r=document.getElementById('li-spots'),_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var v,_loop2=function(){var w=v.value;w.addEventListener('click',function(x){x.preventDefault(),o.classList.add('visible'),p.classList.remove('visible');var y=w.dataset.pokemon,z=m(y.replace(/ /g,'_'));q.innerText=y,r.innerHTML='',fetch(z).then(function(A){return A.text()}).then(function(A){n.innerHTML=A;var B=document.getElementById('Game_locations').parentElement.nextElementSibling.firstElementChild,C=!1,_iteratorNormalCompletion4=!0,_didIteratorError4=!1,_iteratorError4=void 0;try{for(var F,G,E=B.children[Symbol.iterator]();!(_iteratorNormalCompletion4=(F=E.next()).done);_iteratorNormalCompletion4=!0)if(G=F.value,!C){var H=G.querySelectorAll('td table tbody tr:nth-child(2) td table tbody'),_iteratorNormalCompletion6=!0,_didIteratorError6=!1,_iteratorError6=void 0;try{for(var J,K,I=H[Symbol.iterator]();!(_iteratorNormalCompletion6=(J=I.next()).done);_iteratorNormalCompletion6=!0)if(K=J.value,!C){var L=K.querySelectorAll('th'),_iteratorNormalCompletion7=!0,_didIteratorError7=!1,_iteratorError7=void 0;try{for(var N,O,M=L[Symbol.iterator]();!(_iteratorNormalCompletion7=(N=M.next()).done);_iteratorNormalCompletion7=!0)if(O=N.value,!C){var P=O.firstElementChild.firstElementChild.innerHTML.toLocaleLowerCase().trim().replace(/ /g,'-');if(P===document.getElementById('pokedex').dataset.game){var Q=O.parentElement.querySelector('td').firstElementChild.firstElementChild.firstElementChild.firstElementChild.innerHTML,R=Q.split(', ');r.innerHMTL='';var _iteratorNormalCompletion8=!0,_didIteratorError8=!1,_iteratorError8=void 0;try{for(var T,S=R[Symbol.iterator]();!(_iteratorNormalCompletion8=(T=S.next()).done);_iteratorNormalCompletion8=!0){var U=T.value,V=document.createElement('li');V.innerHTML=U,r.appendChild(V)}}catch($){_didIteratorError8=!0,_iteratorError8=$}finally{try{!_iteratorNormalCompletion8&&S.return&&S.return()}finally{if(_didIteratorError8)throw _iteratorError8}}C=!0;break}}}catch($){_didIteratorError7=!0,_iteratorError7=$}finally{try{!_iteratorNormalCompletion7&&M.return&&M.return()}finally{if(_didIteratorError7)throw _iteratorError7}}}}catch($){_didIteratorError6=!0,_iteratorError6=$}finally{try{!_iteratorNormalCompletion6&&I.return&&I.return()}finally{if(_didIteratorError6)throw _iteratorError6}}}}catch($){_didIteratorError4=!0,_iteratorError4=$}finally{try{!_iteratorNormalCompletion4&&E.return&&E.return()}finally{if(_didIteratorError4)throw _iteratorError4}}var D=document.querySelectorAll('#pokemon-location-info a'),_iteratorNormalCompletion5=!0,_didIteratorError5=!1,_iteratorError5=void 0;try{for(var X,W=D[Symbol.iterator]();!(_iteratorNormalCompletion5=(X=W.next()).done);_iteratorNormalCompletion5=!0){var Y=X.value,Z=Y.getAttribute('href');Y.setAttribute('target','_blank'),Y.setAttribute('href','https://bulbapedia.bulbagarden.net'+Z)}}catch($){_didIteratorError5=!0,_iteratorError5=$}finally{try{!_iteratorNormalCompletion5&&W.return&&W.return()}finally{if(_didIteratorError5)throw _iteratorError5}}p.classList.add('visible')})},!0)},u=l[Symbol.iterator]();!(_iteratorNormalCompletion2=(v=u.next()).done);_iteratorNormalCompletion2=!0)_loop2()}catch(w){_didIteratorError2=!0,_iteratorError2=w}finally{try{!_iteratorNormalCompletion2&&u.return&&u.return()}finally{if(_didIteratorError2)throw _iteratorError2}}db.collection('users').doc(a.uid).collection('pokedexes').doc(f).get().then(function(w){if(document.getElementById('trainer-name').innerText=w.data().trainerName,void 0!==w.data().caught){var _iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var y,z,x=w.data().caught[Symbol.iterator]();!(_iteratorNormalCompletion3=(y=x.next()).done);_iteratorNormalCompletion3=!0)z=y.value,document.getElementById('pokemon-'+z).classList.add('caught')}catch(A){_didIteratorError3=!0,_iteratorError3=A}finally{try{!_iteratorNormalCompletion3&&x.return&&x.return()}finally{if(_didIteratorError3)throw _iteratorError3}}k()}}).catch(function(w){console.error(w)})}()}).catch(function(c){console.error('Error!',c)})}else'portal'!==PAGE&&(window.location.href='/')});var logOutLink=document.getElementById('log-out-link');logOutLink.addEventListener('click',function(a){a.preventDefault(),firebase.auth().signOut()}),'portal'===PAGE&&function(){var a=document.getElementById('authentication-portal'),b=document.getElementsByClassName('log-in-link'),_iteratorNormalCompletion9=!0,_didIteratorError9=!1,_iteratorError9=void 0;try{for(var d,f,c=b[Symbol.iterator]();!(_iteratorNormalCompletion9=(d=c.next()).done);_iteratorNormalCompletion9=!0)f=d.value,f.addEventListener('click',function(g){g.preventDefault(),firebase.auth().currentUser?window.location.href='/dex':a.classList.add('visible')})}catch(g){_didIteratorError9=!0,_iteratorError9=g}finally{try{!_iteratorNormalCompletion9&&c.return&&c.return()}finally{if(_didIteratorError9)throw _iteratorError9}}a.addEventListener('click',function(){a.classList.remove('visible')})}();
